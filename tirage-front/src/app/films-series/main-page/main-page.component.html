<div class="bloc">
    @if (ongletToDisplay() === "main") {
        @if (!latestTitlesLoader()) {
            <div class="top-event">
                <drag-scroll [scrollbar-hidden]="true">
                    @for (title of lastTitles() ? lastTitles() : lastTitles(); track $index) {
                        <div class="banner-card" drag-scroll-item (click)="openDetail(title)">
                            <div class="banner-image">
                                <img src="https://image.tmdb.org/t/p/original/{{title?.backdrop_path}}" alt="banner">
                                <div class="overlay"></div>
                            </div>
                            <div class="banner-content">
                                <h2>{{ title?.title ?? title?.name }}</h2>
                            </div>
                        </div>
                    }
                </drag-scroll>
            </div>
        } @else {
            <app-loader-movie></app-loader-movie>
        }

        <div class="categories">
            <div class="categorie glass" (click)="selectOnglet('categorie',  selectedType() === 'movie' ? 28 : 10759)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#CCD6DD" d="m24 29l5-5L6 1H1v5z"/><path fill="#9AAAB4" d="M1 1v5l23 23l2.5-2.5z"/><path fill="#D99E82" d="M33.424 32.808c.284-.284.458-.626.531-.968l-5.242-6.195l-.701-.702c-.564-.564-1.57-.473-2.248.205l-.614.612c-.677.677-.768 1.683-.204 2.247l.741.741l6.15 5.205c.345-.072.688-.247.974-.532l.613-.613z"/><path fill="#BF6952" d="M33.424 32.808c.284-.284.458-.626.531-.968l-1.342-1.586l-.737 3.684c.331-.077.661-.243.935-.518l.613-.612zm-3.31-5.506l-.888 4.441l1.26 1.066l.82-4.1zm-1.401-1.657l-.701-.702a1.2 1.2 0 0 0-.326-.224l-.978 4.892l1.26 1.066l.957-4.783l-.212-.249zm-2.401-.888a2.02 2.02 0 0 0-.548.392l-.614.611a1.981 1.981 0 0 0-.511.86c-.142.51-.046 1.035.307 1.387l.596.596l.77-3.846c0-.001 0-.001 0 0z"/><circle cx="33.25" cy="33.25" r="2.75" fill="#8A4633"/><path fill="#FFAC33" d="M29.626 22.324a1.033 1.033 0 0 1 0 1.462l-6.092 6.092a1.033 1.033 0 1 1-1.462-1.462l6.092-6.092a1.033 1.033 0 0 1 1.462 0z"/><circle cx="22.072" cy="29.877" r="1.75" fill="#FFAC33"/><circle cx="29.626" cy="22.323" r="1.75" fill="#FFAC33"/><circle cx="22.072" cy="29.877" r="1" fill="#FFCC4D"/><circle cx="29.626" cy="22.323" r="1" fill="#FFCC4D"/><path fill="#FFAC33" d="M33.903 29.342a.762.762 0 0 1 0 1.078l-3.476 3.475a.762.762 0 1 1-1.078-1.078l3.476-3.475a.762.762 0 0 1 1.078 0z"/><path fill="#CCD6DD" d="m12 29l-5-5L30 1h5v5z"/><path fill="#9AAAB4" d="M35 1v5L12 29l-2.5-2.5z"/><path fill="#D99E82" d="M2.576 32.808a1.946 1.946 0 0 1-.531-.968l5.242-6.195l.701-.702c.564-.564 1.57-.473 2.248.205l.613.612c.677.677.768 1.683.204 2.247l-.741.741l-6.15 5.205a1.946 1.946 0 0 1-.974-.532l-.612-.613z"/><path fill="#BF6952" d="M2.576 32.808a1.946 1.946 0 0 1-.531-.968l1.342-1.586l.737 3.684a1.932 1.932 0 0 1-.935-.518l-.613-.612zm3.31-5.506l.888 4.441l-1.26 1.066l-.82-4.1zm1.401-1.657l.701-.702a1.2 1.2 0 0 1 .326-.224l.978 4.892l-1.26 1.066l-.957-4.783l.212-.249zm2.401-.888c.195.095.382.225.548.392l.613.612c.254.254.425.554.511.86c.142.51.046 1.035-.307 1.387l-.596.596l-.769-3.847c0-.001 0-.001 0 0z"/><circle cx="2.75" cy="33.25" r="2.75" fill="#8A4633"/><path fill="#FFAC33" d="M6.374 22.324a1.033 1.033 0 0 0 0 1.462l6.092 6.092a1.033 1.033 0 1 0 1.462-1.462l-6.092-6.092a1.033 1.033 0 0 0-1.462 0z"/><circle cx="13.928" cy="29.877" r="1.75" fill="#FFAC33"/><circle cx="6.374" cy="22.323" r="1.75" fill="#FFAC33"/><circle cx="13.928" cy="29.877" r="1" fill="#FFCC4D"/><circle cx="6.374" cy="22.323" r="1" fill="#FFCC4D"/><path fill="#FFAC33" d="M2.097 29.342a.762.762 0 0 0 0 1.078l3.476 3.475a.762.762 0 1 0 1.078-1.078l-3.476-3.475a.762.762 0 0 0-1.078 0z"/></svg>
                <span> Action</span>
            </div>
            <div class="categorie glass" (click)="selectOnglet('categorie', 16)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 432 384"><path fill="#fff" d="M341 21h86v299q0 18-12.5 30.5T384 363H43q-18 0-30.5-12.5T0 320V64q0-18 12.5-30.5T43 21h21l43 86h64l-43-86h43l42 86h64l-42-86h42l43 86h64z"/></svg>
                <span> Animation</span>
            </div>
            @if (selectedType() === 'movie') {
                <div class="categorie glass" (click)="selectOnglet('categorie', 27)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#fff" d="M373.688 22.063c-1.245-.014-2.498 0-3.75.03c-31.364.748-65.528 15.414-96.938 47.313c-88.264 89.642-154.092 171.18-242.938 174.03c23.65 18.21 54.87 31.21 85.25 36.783c-24.375 29.26-50.877 47.65-93.437 64.842c37.915 9.124 74.452 6.5 109.813-2.343c-27.29 34.35-62.118 65.85-107.47 95.78c60.376-.392 136.226-12.138 181.626-47.906c-4.842 30.69-16.186 65.125-43.22 100.47c70.74-18.73 117.115-42.386 146.595-83.533c2.905 27.513-.94 45.098-11.095 80.595c78.006-66.3 150.857-164.775 182.78-270.97C513.44 108.94 452.066 22.89 373.69 22.063zM371.03 96.47c5.76 0 11.1 1.732 15.564 4.686c-7.706.283-13.875 6.6-13.875 14.375c0 7.956 6.45 14.407 14.405 14.407c5.118 0 9.6-2.665 12.156-6.687c.028.503.033 1.022.033 1.53c0 15.633-12.648 28.314-28.282 28.314c-15.632 0-28.31-12.68-28.31-28.313c0-15.63 12.678-28.31 28.31-28.31zm67.376 34.874a28.19 28.19 0 0 1 12.438 2.875c-5.734 1.9-9.875 7.284-9.875 13.655c0 7.955 6.45 14.406 14.405 14.406c4.54 0 8.547-2.093 11.188-5.374c.086.902.156 1.826.156 2.75c0 15.632-12.68 28.313-28.314 28.313c-15.633 0-28.312-12.682-28.312-28.314s12.68-28.312 28.312-28.312zm-111.5 32.47l4.906 45.155l29.782-25.032l4.625 42.53l31.31-26.343l4.314 39.75l30.312-25.47l5.97 55.032l-43.938 36.938l-4.313-39.75l-30.313 25.47l-4.625-42.533l-31.312 26.344l-4.906-45.156l-29.783 25.03l-5.968-55.03l43.936-36.938z"/></svg>
                    <span> Horreur</span>
                </div>
                <div class="categorie glass" (click)="selectOnglet('categorie', 53)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#fff" d="M4.343 1.408L22.374 19.44a1.5 1.5 0 1 1-2.121 2.122l-4.596-4.596L12.12 20.5L8 16.38V19a1 1 0 1 1-2 0v-4a1 1 0 0 0-1.993-.117L4.001 15v1a1 1 0 1 1-2 0V7.214A7.976 7.976 0 0 1 4.17 1.587l.173-.179Z"/></svg>
                    <span> Thriller</span>
                </div>
            } @else {
                <div class="categorie glass" (click)="selectOnglet('categorie', 9648)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#fff" d="M373.688 22.063c-1.245-.014-2.498 0-3.75.03c-31.364.748-65.528 15.414-96.938 47.313c-88.264 89.642-154.092 171.18-242.938 174.03c23.65 18.21 54.87 31.21 85.25 36.783c-24.375 29.26-50.877 47.65-93.437 64.842c37.915 9.124 74.452 6.5 109.813-2.343c-27.29 34.35-62.118 65.85-107.47 95.78c60.376-.392 136.226-12.138 181.626-47.906c-4.842 30.69-16.186 65.125-43.22 100.47c70.74-18.73 117.115-42.386 146.595-83.533c2.905 27.513-.94 45.098-11.095 80.595c78.006-66.3 150.857-164.775 182.78-270.97C513.44 108.94 452.066 22.89 373.69 22.063zM371.03 96.47c5.76 0 11.1 1.732 15.564 4.686c-7.706.283-13.875 6.6-13.875 14.375c0 7.956 6.45 14.407 14.405 14.407c5.118 0 9.6-2.665 12.156-6.687c.028.503.033 1.022.033 1.53c0 15.633-12.648 28.314-28.282 28.314c-15.632 0-28.31-12.68-28.31-28.313c0-15.63 12.678-28.31 28.31-28.31zm67.376 34.874a28.19 28.19 0 0 1 12.438 2.875c-5.734 1.9-9.875 7.284-9.875 13.655c0 7.955 6.45 14.406 14.405 14.406c4.54 0 8.547-2.093 11.188-5.374c.086.902.156 1.826.156 2.75c0 15.632-12.68 28.313-28.314 28.313c-15.633 0-28.312-12.682-28.312-28.314s12.68-28.312 28.312-28.312zm-111.5 32.47l4.906 45.155l29.782-25.032l4.625 42.53l31.31-26.343l4.314 39.75l30.312-25.47l5.97 55.032l-43.938 36.938l-4.313-39.75l-30.313 25.47l-4.625-42.533l-31.312 26.344l-4.906-45.156l-29.783 25.03l-5.968-55.03l43.936-36.938z"/></svg>
                    <span> Mystère</span>
                </div>
                <div class="categorie glass" (click)="selectOnglet('categorie', 10764)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#fff" d="M373.688 22.063c-1.245-.014-2.498 0-3.75.03c-31.364.748-65.528 15.414-96.938 47.313c-88.264 89.642-154.092 171.18-242.938 174.03c23.65 18.21 54.87 31.21 85.25 36.783c-24.375 29.26-50.877 47.65-93.437 64.842c37.915 9.124 74.452 6.5 109.813-2.343c-27.29 34.35-62.118 65.85-107.47 95.78c60.376-.392 136.226-12.138 181.626-47.906c-4.842 30.69-16.186 65.125-43.22 100.47c70.74-18.73 117.115-42.386 146.595-83.533c2.905 27.513-.94 45.098-11.095 80.595c78.006-66.3 150.857-164.775 182.78-270.97C513.44 108.94 452.066 22.89 373.69 22.063zM371.03 96.47c5.76 0 11.1 1.732 15.564 4.686c-7.706.283-13.875 6.6-13.875 14.375c0 7.956 6.45 14.407 14.405 14.407c5.118 0 9.6-2.665 12.156-6.687c.028.503.033 1.022.033 1.53c0 15.633-12.648 28.314-28.282 28.314c-15.632 0-28.31-12.68-28.31-28.313c0-15.63 12.678-28.31 28.31-28.31zm67.376 34.874a28.19 28.19 0 0 1 12.438 2.875c-5.734 1.9-9.875 7.284-9.875 13.655c0 7.955 6.45 14.406 14.405 14.406c4.54 0 8.547-2.093 11.188-5.374c.086.902.156 1.826.156 2.75c0 15.632-12.68 28.313-28.314 28.313c-15.633 0-28.312-12.682-28.312-28.314s12.68-28.312 28.312-28.312zm-111.5 32.47l4.906 45.155l29.782-25.032l4.625 42.53l31.31-26.343l4.314 39.75l30.312-25.47l5.97 55.032l-43.938 36.938l-4.313-39.75l-30.313 25.47l-4.625-42.533l-31.312 26.344l-4.906-45.156l-29.783 25.03l-5.968-55.03l43.936-36.938z"/></svg>
                    <span> Réalité</span>
                </div>
            }
            <div class="categorie glass" (click)="selectOnglet('categorie', selectedType() === 'movie' ? 878 : 10765)">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="#fff" d="M15.498 4a.365.365 0 0 0-.367.352l-.53 13.705l-1.398-.95a.365.365 0 0 0-.459.036a.369.369 0 0 0-.062.457l.923 1.55l-1.933.4a.367.367 0 0 0-.293.36a.37.37 0 0 0 .293.361l1.933.4l-.925 1.554a.37.37 0 0 0 .064.457a.382.382 0 0 0 .46.033l1.247-.85l-.113 3c-2.617-.535-4.592-2.844-4.592-5.603c0-1.612.673-3.107 1.893-4.21a.755.755 0 0 0 .252-.597a.755.755 0 0 0-.309-.568c-1.685-1.248-2.65-3.155-2.65-5.229c0-.807.15-1.6.45-2.355a.732.732 0 0 0-.071-.694a.753.753 0 0 0-.622-.332a.732.732 0 0 0-.425.137a12.397 12.397 0 0 0-4.963 7.45l1.902 1.902h-2.17a12.38 12.38 0 0 0-.023 1.377c.028.617.116 1.218.234 1.81l2.693 2.693H4.104c1.896 4.147 6.026 7.12 10.804 7.34c.198.01.394.014.59.014c5.071 0 9.438-3.026 11.397-7.354h-1.836l2.705-2.705A12.39 12.39 0 0 0 28 15.56c0-.267-.032-.53-.049-.795h-2.156l1.894-1.895a12.46 12.46 0 0 0-4.959-7.457a.728.728 0 0 0-.423-.137a.753.753 0 0 0-.621.332a.735.735 0 0 0-.075.694c.301.756.453 1.55.453 2.357c0 2.074-.965 3.98-2.65 5.229a.752.752 0 0 0-.057 1.168a5.68 5.68 0 0 1 1.774 5.38c-.448 2.223-2.245 4.002-4.473 4.434l-.113-3.002l1.248.85c.137.095.34.078.46-.037a.37.37 0 0 0 .061-.457l-.923-1.55l1.933-.402a.367.367 0 0 0 0-.718l-1.933-.403l.925-1.55a.367.367 0 0 0-.523-.493l-1.397.95l-.53-13.703A.366.366 0 0 0 15.497 4z"/></svg>
                <span> Science Fiction</span>
            </div>

        </div>

        @if (selectedType() === 'movie') {
            @if (moviestrending()) {
                <app-liste-titres-drag [titres]="moviestrending()" [title]="'Films tendances'"></app-liste-titres-drag>
                <app-liste-titres-drag [titres]="moviesPopular()" [title]="'Films populaires'"></app-liste-titres-drag>
            }
        }
        @if (selectedType() === 'tv') {
            @if (seriesTopRated()) {
                <app-liste-titres-drag [titres]="seriestrending()" [title]="'Séries tendances'"></app-liste-titres-drag>
                <app-liste-titres-drag [titres]="seriesPopular()" [title]="'Séries populaires'"></app-liste-titres-drag>
            }
        }

    } @else if (ongletToDisplay() === "categorie") {
        @if (!latestTitlesGenreLoader()) {
            <button class="btn-glass glass" (click)="selectOnglet('main')">
                <svg xmlns="http://www.w3.org/2000/svg" width="17" viewBox="0 0 20 20"><path fill="#fff" d="m3.828 9l6.071-6.071l-1.414-1.414L0 10l.707.707l7.778 7.778l1.414-1.414L3.828 11H20V9H3.828z"/></svg>
                <span>Retour</span>
            </button>
        <app-liste-titres [titres]="titlesGenre()"></app-liste-titres>
        } @else {
            <app-loader-movie></app-loader-movie>
        }
    }
</div>

