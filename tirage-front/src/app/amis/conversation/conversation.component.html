<div class="bloc">
    @if (view() === "allConversations") {
        @if (conversations()) {
            <div class="demandes">
                @for (conversation of conversations(); track $index) {
                    <div class="glass no-hover" (click)="changeView(conversation[0]?.conversation)">
                        @if (conversation.length > 1) {
                            <div class="conversation-name">
                                <span>{{conversation[0].conversation?.nom}}</span>
                            </div>
                        } @else {
                            <div class="conversation-name">
                                <span>{{conversation[0].user?.name}}</span>
                            </div>
                        }
                        @if (conversation[0]?.conversation?.messages[conversation[0]?.conversation?.messages?.length - 1]?.message) {
                            <div class="lastMessage">
                                <div class="name">
                                    <span class="msg">
                                        {{conversation[0]?.conversation?.messages[conversation[0]?.conversation?.messages?.length - 1]?.user.name }}:
                                        {{conversation[0]?.conversation?.messages[conversation[0]?.conversation?.messages?.length - 1]?.message }}
                                    </span>
                                </div>
                                <div class="date">
                                    <span>{{timeAgo(conversation[0]?.conversation?.messages[conversation[0]?.conversation?.messages?.length - 1]?.created_at)}} </span>
                                </div>
                            </div>
                        }
                    </div>
                }
            </div>
        }
    }
    @if (view() === "singleConversation") {
        <app-open-conversation [conversation]="conversation" [userConnected]="user"></app-open-conversation>
    }
</div>
